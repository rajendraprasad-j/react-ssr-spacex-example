import React from 'react';
import { render } from '@testing-library/react';

import App from '../App';
import { ServerDataProvider } from '../../state/serverDataContext';
const SampleData = [{"flight_number":20,"mission_name":"DSCOVR","mission_id":[],"launch_year":"2015","launch_date_unix":1423695780,"launch_date_utc":"2015-02-11T23:03:00.000Z","launch_date_local":"2015-02-11T19:03:00-04:00","is_tentative":false,"tentative_max_precision":"hour","tbd":false,"launch_window":0,"rocket":{"rocket_id":"falcon9","rocket_name":"Falcon 9","rocket_type":"v1.1","first_stage":{"cores":[{"core_serial":"B1013","flight":1,"block":1,"gridfins":true,"legs":true,"reused":false,"land_success":true,"landing_intent":true,"landing_type":"Ocean","landing_vehicle":null}]},"second_stage":{"block":1,"payloads":[{"payload_id":"DSCOVR","norad_id":[40390],"reused":false,"customers":["NASA","NOAA","USAF"],"nationality":"United States","manufacturer":"Sierra Nevada","payload_type":"Satellite","payload_mass_kg":570,"payload_mass_lbs":1260,"orbit":"ES-L1","orbit_params":{"reference_system":"heliocentric","regime":"L1-point","longitude":null,"semi_major_axis_km":null,"eccentricity":null,"periapsis_km":null,"apoapsis_km":null,"inclination_deg":null,"period_min":null,"lifespan_years":5,"epoch":null,"mean_motion":null,"raan":null,"arg_of_pericenter":null,"mean_anomaly":null}}]},"fairings":{"reused":false,"recovery_attempt":false,"recovered":false,"ship":null}},"ships":["ELSBETH3","GOQUEST","GOSEARCHER"],"telemetry":{"flight_club":null},"launch_site":{"site_id":"ccafs_slc_40","site_name":"CCAFS SLC 40","site_name_long":"Cape Canaveral Air Force Station Space Launch Complex 40"},"launch_success":true,"links":{"mission_patch":"https://images2.imgbox.com/ec/a0/kTPQRyzt_o.png","mission_patch_small":"https://images2.imgbox.com/63/c5/0OIpD59z_o.png","reddit_campaign":null,"reddit_launch":"http://www.reddit.com/r/spacex/comments/2vjm9e","reddit_recovery":null,"reddit_media":null,"presskit":"http://www.spacex.com/press/2015/02/11/dscovr-launch-update","article_link":"https://spaceflightnow.com/2015/02/12/space-weather-observatory-blasts-off-after-17-year-wait/","wikipedia":"https://en.wikipedia.org/wiki/Deep_Space_Climate_Observatory","video_link":"https://www.youtube.com/watch?v=OvHJSIKP0Hg","youtube_id":"OvHJSIKP0Hg","flickr_images":["https://farm9.staticflickr.com/8619/16511407538_9a25c5d8c6_o.jpg","https://farm9.staticflickr.com/8665/16697946612_1284e952b0_o.jpg","https://farm9.staticflickr.com/8570/16698990475_16524a93de_o.jpg","https://farm9.staticflickr.com/8681/16512864259_e849e496b1_o.jpg","https://farm9.staticflickr.com/8637/16079045013_1f0fab9b54_o.jpg","https://farm9.staticflickr.com/8601/16512864369_2bb896c344_o.jpg","https://farm9.staticflickr.com/8646/16697693861_a038331e0a_o.jpg","https://farm9.staticflickr.com/8680/16511407248_093635a243_o.jpg","https://farm9.staticflickr.com/8654/16511594820_451f194d53_o.jpg","https://farm9.staticflickr.com/8603/16673054016_472fb42a20_o.jpg"]},"details":"First launch under USAF's OSP 3 launch contract. First SpaceX launch to put a satellite to an orbit with an orbital altitude many times the distance to the Moon: Sun-Earth libration point L1. The first stage made a test flight descent to an over-ocean landing within 10 m (33 ft) of its intended target.","upcoming":false,"static_fire_date_utc":"2015-01-31T00:00:00.000Z","static_fire_date_unix":1422662400,"timeline":{"webcast_launch":960},"crew":null},{"flight_number":25,"mission_name":"OG-2 Mission 2","mission_id":["CE91D46"],"launch_year":"2015","launch_date_unix":1450747740,"launch_date_utc":"2015-12-22T01:29:00.000Z","launch_date_local":"2015-12-22T21:29:00-04:00","is_tentative":false,"tentative_max_precision":"hour","tbd":false,"launch_window":0,"rocket":{"rocket_id":"falcon9","rocket_name":"Falcon 9","rocket_type":"FT","first_stage":{"cores":[{"core_serial":"B1019","flight":1,"block":1,"gridfins":true,"legs":true,"reused":false,"land_success":true,"landing_intent":true,"landing_type":"RTLS","landing_vehicle":"LZ-1"}]},"second_stage":{"block":1,"payloads":[{"payload_id":"Orbcomm-OG2-M2","norad_id":[41187],"reused":false,"customers":["Orbcomm"],"nationality":"United States","manufacturer":"Boeing","payload_type":"Satellite","payload_mass_kg":2034,"payload_mass_lbs":4484,"orbit":"LEO","orbit_params":{"reference_system":"geocentric","regime":"low-earth","longitude":null,"semi_major_axis_km":7088.117,"eccentricity":0.0001309,"periapsis_km":709.054,"apoapsis_km":710.909,"inclination_deg":47.0048,"period_min":98.981,"lifespan_years":5,"epoch":"2020-08-17T19:05:51.000Z","mean_motion":14.54810557,"raan":127.936,"arg_of_pericenter":179.515,"mean_anomaly":180.5736}}]},"fairings":{"reused":false,"recovery_attempt":false,"recovered":false,"ship":null}},"ships":[],"telemetry":{"flight_club":"https://www.flightclub.io/results/?code=OG22"},"launch_site":{"site_id":"ccafs_slc_40","site_name":"CCAFS SLC 40","site_name_long":"Cape Canaveral Air Force Station Space Launch Complex 40"},"launch_success":true,"links":{"mission_patch":"https://images2.imgbox.com/65/a5/8iNE9T6Y_o.png","mission_patch_small":"https://images2.imgbox.com/89/e8/5eeThzqZ_o.png","reddit_campaign":null,"reddit_launch":"https://www.reddit.com/r/spacex/comments/3xgxh5","reddit_recovery":null,"reddit_media":"https://www.reddit.com/r/spacex/comments/3xm83h/","presskit":"http://www.spacex.com/sites/spacex/files/spacex_orbcomm_press_kit_final2.pdf","article_link":"https://spaceflightnow.com/2015/12/22/round-trip-rocket-flight-gives-spacex-a-trifecta-of-successes/","wikipedia":"https://en.wikipedia.org/wiki/Falcon_9_flight_20","video_link":"https://www.youtube.com/watch?v=O5bTbVbe4e4","youtube_id":"O5bTbVbe4e4","flickr_images":["https://farm2.staticflickr.com/1648/23827554109_837b21739e_o.jpg","https://farm1.staticflickr.com/597/23802553412_d41e4dcc64_o.jpg","https://farm6.staticflickr.com/5806/23802550622_9ff8c90098_o.jpg","https://farm1.staticflickr.com/571/23604164970_2a1a2366e4_o.jpg","https://farm6.staticflickr.com/5773/23271687254_5e64d726ba_o.jpg","https://farm6.staticflickr.com/5766/23526044959_5bfe74bc88_o.jpg","https://farm6.staticflickr.com/5723/23785609832_83038751d1_o.jpg","https://farm1.staticflickr.com/715/23833499336_d3fde6a25a_o.jpg"]},"details":"Total payload mass was 2,034 kg (4,484 lb) : 11 satellites weighing 172 kg each, plus a 142-kg mass simulator. This was the first launch of the upgraded v1.1 variant (later called Falcon 9 Full Thrust), with a 30 percent power increase. Orbcomm had originally agreed to be the third flight of the enhanced-thrust rocket, but the change to the maiden flight position was announced in October 2015. SpaceX received a permit from the FAA to land the booster on solid ground at Cape Canaveral, and succeeded.","upcoming":false,"static_fire_date_utc":"2015-12-19T00:09:00.000Z","static_fire_date_unix":1450483740,"timeline":{"webcast_liftoff":1382,"go_for_prop_loading":-2280,"rp1_loading":-2100,"stage1_lox_loading":-2100,"stage2_lox_loading":-960,"engine_chill":-420,"prelaunch_checks":-60,"propellant_pressurization":-60,"go_for_launch":-45,"ignition":-3,"liftoff":0,"maxq":60,"meco":140,"stage_sep":144,"second_stage_ignition":155,"fairing_deploy":180,"first_stage_boostback_burn":240,"first_stage_entry_burn":480,"seco-1":600,"first_stage_landing":600,"payload_deploy":900},"crew":null}]
describe('<Main />', () => {
  it('renders server launches', () => {
    const { container } = render(
      <ServerDataProvider value={{ launch: SampleData }}>
        <App />
      </ServerDataProvider>
    );
    expect(container.querySelector('.filters__heading').textContent).toEqual('Filters');
  });
});
